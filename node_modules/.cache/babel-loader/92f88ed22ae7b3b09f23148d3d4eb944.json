{"remainingRequest":"/home/parallels/aws/test-amplify-album/amplify-vue-album/node_modules/babel-loader/lib/index.js!/home/parallels/aws/test-amplify-album/amplify-vue-album/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/parallels/aws/test-amplify-album/amplify-vue-album/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/parallels/aws/test-amplify-album/amplify-vue-album/src/views/album/Index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/parallels/aws/test-amplify-album/amplify-vue-album/src/views/album/Index.vue","mtime":1623461472155},{"path":"/home/parallels/aws/test-amplify-album/amplify-vue-album/node_modules/cache-loader/dist/cjs.js","mtime":1623474110567},{"path":"/home/parallels/aws/test-amplify-album/amplify-vue-album/node_modules/babel-loader/lib/index.js","mtime":1623474110571},{"path":"/home/parallels/aws/test-amplify-album/amplify-vue-album/node_modules/cache-loader/dist/cjs.js","mtime":1623474110567},{"path":"/home/parallels/aws/test-amplify-album/amplify-vue-album/node_modules/vue-loader-v16/dist/index.js","mtime":1623474110495}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3BhcmFsbGVscy9hd3MvdGVzdC1hbXBsaWZ5LWFsYnVtL2FtcGxpZnktdnVlLWFsYnVtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBBUEkgfSBmcm9tICJhd3MtYW1wbGlmeSI7CmltcG9ydCB7IGxpc3RBbGJ1bXMgfSBmcm9tICIuLi8uLi9ncmFwaHFsL3F1ZXJpZXMiOwppbXBvcnQgeyBkZWxldGVBbGJ1bSBhcyBfZGVsZXRlQWxidW0gfSBmcm9tICIuLi8uLi9ncmFwaHFsL211dGF0aW9ucyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQWxidW1JbmRleCIsCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLmdldEFsYnVtcygpOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFsYnVtczogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRBbGJ1bXM6IGZ1bmN0aW9uIGdldEFsYnVtcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIEFQSS5ncmFwaHFsKHsKICAgICAgICAgICAgICAgICAgcXVlcnk6IGxpc3RBbGJ1bXMKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgICAgICAgICAgICBfdGhpczIuYWxidW1zID0gcmVzdWx0LmRhdGEubGlzdEFsYnVtcy5pdGVtczsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZGVsZXRlQWxidW06IGZ1bmN0aW9uIGRlbGV0ZUFsYnVtKGluZGV4LCBhbGJ1bUlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChjb25maXJtKCJEZWxldGUgQWxidW0/IikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBBUEkuZ3JhcGhxbCh7CiAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBfZGVsZXRlQWxidW0sCiAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICAgICAgICAgIGlucHV0OiB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogYWxidW1JZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CgogICAgICAgICAgICAgICAgICBfdGhpczMuYWxidW1zLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/parallels/aws/test-amplify-album/amplify-vue-album/src/views/album/Index.vue"],"names":[],"mappings":";;;AAuCA,SAAS,GAAT,QAAoB,aAApB;AACA,SAAS,UAAT,QAA2B,uBAA3B;AACA,SAAS,WAAU,IAAV,YAAT,QAA4B,yBAA5B;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,YADO;AAEP,EAAA,OAFO,qBAEG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,cAAA,KAAI,CAAC,SAAL;;AADc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEf,GAJY;AAKb,EAAA,IALa,kBAKN;AACL,WAAO;AACL,MAAA,MAAM,EAAE;AADH,KAAP;AAGD,GATY;AAUb,EAAA,OAAO,EAAE;AACD,IAAA,SADC,uBACW;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACV,GAAG,CAAC,OAAJ,CAAY;AAChB,kBAAA,KAAK,EAAE;AADS,iBAAZ,EAGH,IAHG,CAGE,UAAC,MAAD,EAAY;AAChB,kBAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;AACA,kBAAA,MAAI,CAAC,MAAL,GAAc,MAAM,CAAC,IAAP,CAAY,UAAZ,CAAuB,KAArC;AACD,iBANG,EAOH,KAPG,CAOG,UAAC,KAAD,EAAW;AAChB,kBAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,iBATG,CADU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWjB,KAZM;AAaD,IAAA,WAbC,uBAaW,KAbX,EAakB,OAblB,EAa2B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAC3B,OAAO,CAAC,eAAD,CADoB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,uBAG1B,GAAG,CAAC,OAAJ,CAAY;AAChB,kBAAA,KAAK,EAAE,YADS;AAEhB,kBAAA,SAAS,EAAE;AAAE,oBAAA,KAAK,EAAE;AAAE,sBAAA,EAAE,EAAE;AAAN;AAAT;AAFK,iBAAZ,EAIH,IAJG,CAIE,UAAC,MAAD,EAAY;AAChB,kBAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;;AACA,kBAAA,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,KAAnB,EAA0B,CAA1B;AACD,iBAPG,EAQH,KARG,CAQG,UAAC,KAAD,EAAW;AAChB,kBAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,iBAVG,CAH0B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcjC;AA3BM;AAVI,CAAf","sourcesContent":["<template>\n  <div>\n    <h1>アルバム一覧</h1>\n    \n    <router-link custom v-slot=\"{ navigate }\" :to=\"{ name: 'AlbumCreate' }\">\n      <button @click=\"navigate\">Add Album</button>\n    </router-link>\n    <table border=\"1\">\n      <tr v-for=\"(album, index) in albums\" :key=\"album.id\">\n        <td>{{ album.name }}</td>\n        <td>\n          <router-link\n            custom\n            v-slot=\"{ navigate }\"\n            :to=\"{ name: 'AlbumShow', params: { albumId: album.id } }\"\n          >\n            <button @click=\"navigate\">Show Album</button>\n          </router-link>\n        </td>\n        <td>\n          <router-link\n            custom\n            v-slot=\"{ navigate }\"\n            :to=\"{ name: 'AlbumEdit', params: { albumId: album.id } }\"\n          >\n            <button @click=\"navigate\">Edit Album</button>\n          </router-link>\n        </td>\n        <td>\n          <button @click=\"deleteAlbum(index, album.id)\">\n            Delete Album\n          </button>\n        </td>\n      </tr>\n    </table>\n  </div>\n</template>\n\n<script>\nimport { API } from \"aws-amplify\";\nimport { listAlbums } from \"../../graphql/queries\";\nimport { deleteAlbum } from \"../../graphql/mutations\";\n\nexport default {\n  name: \"AlbumIndex\",\n  async created() {\n    this.getAlbums();\n  },\n  data() {\n    return {\n      albums: [],\n    };\n  },\n  methods: {\n    async getAlbums() {\n      await API.graphql({\n        query: listAlbums,\n      })\n        .then((result) => {\n          console.log(result);\n          this.albums = result.data.listAlbums.items;\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    async deleteAlbum(index, albumId) {\n      if (!confirm(\"Delete Album?\")) return;\n\n      await API.graphql({\n        query: deleteAlbum,\n        variables: { input: { id: albumId } },\n      })\n        .then((result) => {\n          console.log(result);\n          this.albums.splice(index, 1);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n  },\n};\n</script>"],"sourceRoot":""}]}